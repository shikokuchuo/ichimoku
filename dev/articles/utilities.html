<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>ichimoku: Auxiliary Functions • ichimoku</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ichimoku: Auxiliary Functions">
<meta name="robots" content="noindex">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ichimoku</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.5.6.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/reference.html">ichimoku: Cloud Charts - The Reference Manual</a></li>
    <li><a class="dropdown-item" href="../articles/strategies.html">ichimoku: Beyond Visualization - Quantitative Strategies</a></li>
    <li><a class="dropdown-item" href="../articles/utilities.html">ichimoku: Auxiliary Functions</a></li>
    <li><a class="dropdown-item" href="../articles/xoanda.html">ichimoku: The OANDA fxTrade API</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/shikokuchuo/ichimoku/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://shikokuchuo.net/" aria-label="shikokuchuo"><span class="fa fa-cube"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ichimoku: Auxiliary Functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/shikokuchuo/ichimoku/blob/main/vignettes/utilities.Rmd" class="external-link"><code>vignettes/utilities.Rmd</code></a></small>
      <div class="d-none name"><code>utilities.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shikokuchuo.net/ichimoku/">ichimoku</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette is dedicated to the auxiliary functions exported by the
ichimoku package.</p>
<p>Note that these auxiliary functions are programmed for performance
and hence stripped of superfluous validation and error-checking code. If
they are used outside of their intended scopes then errors may be
expected. In particular, input types must match exactly.</p>
</div>
<div class="section level2">
<h2 id="core-auxiliary-functions">Core Auxiliary Functions<a class="anchor" aria-label="anchor" href="#core-auxiliary-functions"></a>
</h2>
<div class="section level4">
<h4 id="tradingdays">tradingDays()<a class="anchor" aria-label="anchor" href="#tradingdays"></a>
</h4>
<p>Used to subset a vector of dates to trading days. Note: if the
argument ‘holidays’ is passed to <code><a href="../reference/ichimoku.html">ichimoku()</a></code>, this is passed
through to this function when calculating the dates for the future
cloud.</p>
<p>Takes the following arguments:</p>
<ul>
<li>
<code>x</code> a vector of POSIXct dates.</li>
<li>
<code>holidays</code> (optional) a vector, or function which outputs
a vector, of dates defined as holidays. Set to NULL for a
continuously-traded market. If not specified, New Year’s and Christmas
day are defined as holidays by default.</li>
<li>
<code>...</code> other arguments not used by this function.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="st">"2020-01-01"</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"1 day"</span>, length.out <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span><span class="va">dates</span></span>
<span><span class="co">#&gt; [1] "2020-01-01 UTC" "2020-01-02 UTC" "2020-01-03 UTC" "2020-01-04 UTC"</span></span>
<span><span class="co">#&gt; [5] "2020-01-05 UTC" "2020-01-06 UTC" "2020-01-07 UTC"</span></span>
<span><span class="fu"><a href="../reference/tradingDays.html">tradingDays</a></span><span class="op">(</span><span class="va">dates</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE</span></span>
<span><span class="fu"><a href="../reference/tradingDays.html">tradingDays</a></span><span class="op">(</span><span class="va">dates</span>, holidays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2020-01-02"</span>, <span class="st">"2020-01-03"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1]  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE</span></span>
<span><span class="fu"><a href="../reference/tradingDays.html">tradingDays</a></span><span class="op">(</span><span class="va">dates</span>, holidays <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="look">look()<a class="anchor" aria-label="anchor" href="#look"></a>
</h4>
<p>Can be used to inspect the informational attributes of R objects.</p>
<p>Takes an object as an optional argument. Called without an argument,
<code>.Last.value</code> will be used instead.</p>
<p>For objects created by the ichimoku package, a list of attributes
specific to that data type is returned.</p>
<p>For other objects, a list of attributes that are non-standard for
matrix / data.frame / xts objects is returned, or else invisible NULL if
none are present.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cloud</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ichimoku.html">ichimoku</a></span><span class="op">(</span><span class="va">sample_ohlc_data</span>, ticker <span class="op">=</span> <span class="st">"TKR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/look.html">look</a></span><span class="op">(</span><span class="va">cloud</span><span class="op">)</span></span>
<span><span class="co">#&gt; $periods</span></span>
<span><span class="co">#&gt; [1]  9 26 52</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $periodicity</span></span>
<span><span class="co">#&gt; [1] 86400</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ticker</span></span>
<span><span class="co">#&gt; [1] "TKR"</span></span>
<span></span>
<span><span class="va">strat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strat.html">strat</a></span><span class="op">(</span><span class="va">cloud</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/look.html">look</a></span><span class="op">(</span><span class="va">strat</span><span class="op">)</span></span>
<span><span class="co">#&gt; $periods</span></span>
<span><span class="co">#&gt; [1]  9 26 52</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $periodicity</span></span>
<span><span class="co">#&gt; [1] 86400</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ticker</span></span>
<span><span class="co">#&gt; [1] "TKR"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $strat</span></span>
<span><span class="co">#&gt;                        [,1]            </span></span>
<span><span class="co">#&gt; Strategy               "close &gt; tenkan"</span></span>
<span><span class="co">#&gt; ---------------------  "----------"    </span></span>
<span><span class="co">#&gt; Strategy cuml return % 8.57            </span></span>
<span><span class="co">#&gt; Per period mean ret %  0.0334          </span></span>
<span><span class="co">#&gt; Periods in market      138             </span></span>
<span><span class="co">#&gt; Total trades           20              </span></span>
<span><span class="co">#&gt; Average trade length   6.9             </span></span>
<span><span class="co">#&gt; Trade success %        35              </span></span>
<span><span class="co">#&gt; Worst trade ret %      -2.54           </span></span>
<span><span class="co">#&gt; ---------------------  "----------"    </span></span>
<span><span class="co">#&gt; Benchmark cuml ret %   9               </span></span>
<span><span class="co">#&gt; Per period mean ret %  0.035           </span></span>
<span><span class="co">#&gt; Periods in market      246             </span></span>
<span><span class="co">#&gt; ---------------------  "----------"    </span></span>
<span><span class="co">#&gt; Direction              "long"          </span></span>
<span><span class="co">#&gt; Start                  2020-01-15      </span></span>
<span><span class="co">#&gt; End                    2020-12-23      </span></span>
<span><span class="co">#&gt; Ticker                 "TKR"</span></span>
<span></span>
<span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mlgrid.html">mlgrid</a></span><span class="op">(</span><span class="va">cloud</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/look.html">look</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span>
<span><span class="co">#&gt; $y</span></span>
<span><span class="co">#&gt; [1] "logret"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $k</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $direction</span></span>
<span><span class="co">#&gt; [1] "long"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $type</span></span>
<span><span class="co">#&gt; [1] "boolean"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $ticker</span></span>
<span><span class="co">#&gt; [1] "TKR"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $means</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $sdevs</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="dataframe-constructors">Dataframe Constructors<a class="anchor" aria-label="anchor" href="#dataframe-constructors"></a>
</h2>
<div class="section level4">
<h4 id="xts_df">xts_df()<a class="anchor" aria-label="anchor" href="#xts_df"></a>
</h4>
<p>Convert an ‘xts’ object to ‘data.frame’. This function can be an
order of magnitude faster than <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> for an ‘xts’
object.</p>
<p>Note that for ichimoku objects, a slightly faster, more specific
version has been implemented as the S3 method for
<code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code>. Hence using this utility on an ichimoku
object is not necessary.</p>
<p>Takes the following arguments:</p>
<ul>
<li>
<code>x</code> the ‘xts’ object to convert to ‘data.frame’.</li>
<li>
<code>keep.attrs</code> (optional) if set to TRUE, will preserve any
custom attributes set on the original object.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cloud</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ichimoku.html">ichimoku</a></span><span class="op">(</span><span class="va">sample_ohlc_data</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xts_df.html">xts_df</a></span><span class="op">(</span><span class="va">cloud</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    281 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ index  : POSIXct, format: "2020-01-02 00:00:00" "2020-01-03 00:00:00" ...</span></span>
<span><span class="co">#&gt;  $ open   : num  123 123 123 123 124 ...</span></span>
<span><span class="co">#&gt;  $ high   : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ low    : num  122 123 122 123 124 ...</span></span>
<span><span class="co">#&gt;  $ close  : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ cd     : num  -1 1 1 1 1 1 -1 0 -1 -1 ...</span></span>
<span><span class="co">#&gt;  $ tenkan : num  NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ kijun  : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouA: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouB: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ chikou : num  123 123 123 124 124 ...</span></span>
<span><span class="co">#&gt;  $ cloudT : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ cloudB : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span></span>
<span><span class="co"># Preserving custom attributes:</span></span>
<span><span class="va">df2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/xts_df.html">xts_df</a></span><span class="op">(</span><span class="va">cloud</span>, keep.attrs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df2</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    281 obs. of  13 variables:</span></span>
<span><span class="co">#&gt;  $ index  : POSIXct, format: "2020-01-02 00:00:00" "2020-01-03 00:00:00" ...</span></span>
<span><span class="co">#&gt;  $ open   : num  123 123 123 123 124 ...</span></span>
<span><span class="co">#&gt;  $ high   : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ low    : num  122 123 122 123 124 ...</span></span>
<span><span class="co">#&gt;  $ close  : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ cd     : num  -1 1 1 1 1 1 -1 0 -1 -1 ...</span></span>
<span><span class="co">#&gt;  $ tenkan : num  NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ kijun  : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouA: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouB: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ chikou : num  123 123 123 124 124 ...</span></span>
<span><span class="co">#&gt;  $ cloudT : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ cloudB : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  - attr(*, "periods")= int [1:3] 9 26 52</span></span>
<span><span class="co">#&gt;  - attr(*, "periodicity")= num 86400</span></span>
<span><span class="co">#&gt;  - attr(*, "ticker")= chr "sample_ohlc_data"</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="matrix_df">matrix_df()<a class="anchor" aria-label="anchor" href="#matrix_df"></a>
</h4>
<p>Convert a matrix to ‘data.frame’. This function can be twice as fast
as <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> for a matrix.</p>
<p>Takes the following arguments:</p>
<ul>
<li>
<code>x</code> the matrix to convert to ‘data.frame’.</li>
<li>
<code>keep.attrs</code> (optional) if set to TRUE, will preserve any
custom attributes set on the original object.</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cloud</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ichimoku.html">ichimoku</a></span><span class="op">(</span><span class="va">sample_ohlc_data</span><span class="op">)</span></span>
<span><span class="va">mcloud</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">cloud</span><span class="op">)</span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/matrix_df.html">matrix_df</a></span><span class="op">(</span><span class="va">mcloud</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    281 obs. of  12 variables:</span></span>
<span><span class="co">#&gt;  $ open   : num  123 123 123 123 124 ...</span></span>
<span><span class="co">#&gt;  $ high   : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ low    : num  122 123 122 123 124 ...</span></span>
<span><span class="co">#&gt;  $ close  : num  123 123 123 124 125 ...</span></span>
<span><span class="co">#&gt;  $ cd     : num  -1 1 1 1 1 1 -1 0 -1 -1 ...</span></span>
<span><span class="co">#&gt;  $ tenkan : num  NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ kijun  : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouA: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ senkouB: num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ chikou : num  123 123 123 124 124 ...</span></span>
<span><span class="co">#&gt;  $ cloudT : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ cloudB : num  NA NA NA NA NA NA NA NA NA NA ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt;  chr [1:281] "2020-01-02" "2020-01-03" "2020-01-06" "2020-01-07" ...</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="dataframe-utilities">Dataframe Utilities<a class="anchor" aria-label="anchor" href="#dataframe-utilities"></a>
</h2>
<div class="section level4">
<h4 id="df_merge">df_merge()<a class="anchor" aria-label="anchor" href="#df_merge"></a>
</h4>
<p>Full join on an arbitrary number of ‘data.frame’ objects passed as
arguments, preserving all unique entries. Can be used to combine
historical time series data where each observation is indexed by a
unique timestamp and all periods are complete.</p>
<p>Takes an arbitrary number of arguments:</p>
<ul>
<li>
<code>...</code> data.frame objects to combine.</li>
</ul>
<p>Can be used to join price dataframes retrieved by
<code><a href="../reference/oanda.html">oanda()</a></code>. The function is designed to join complete
historical data. If the data to be merged contains data with incomplete
periods, all entries are preserved rather than updated. If incomplete
periods are detected within the data, a warning is issued, and the
resulting dataframe should be manually inspected in case it contains
unwanted duplicates. Use <code><a href="../reference/df_append.html">df_append()</a></code> for updating
dataframes with new values.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="va">sample_ohlc_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="op">]</span></span>
<span><span class="va">data1</span></span>
<span><span class="co">#&gt;         time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 1 2020-01-02 123.0 123.1 122.5 122.7   1875</span></span>
<span><span class="co">#&gt; 2 2020-01-03 122.7 122.8 122.6 122.8   1479</span></span>
<span><span class="co">#&gt; 3 2020-01-06 122.8 123.4 122.4 123.3   1792</span></span>
<span><span class="co">#&gt; 4 2020-01-07 123.3 124.3 123.3 124.1   1977</span></span>
<span><span class="co">#&gt; 5 2020-01-08 124.1 124.8 124.0 124.8   2239</span></span>
<span><span class="co">#&gt; 6 2020-01-09 124.8 125.4 124.5 125.3   1842</span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">sample_ohlc_data</span><span class="op">[</span><span class="fl">4</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span><span class="va">data2</span></span>
<span><span class="co">#&gt;          time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 4  2020-01-07 123.3 124.3 123.3 124.1   1977</span></span>
<span><span class="co">#&gt; 5  2020-01-08 124.1 124.8 124.0 124.8   2239</span></span>
<span><span class="co">#&gt; 6  2020-01-09 124.8 125.4 124.5 125.3   1842</span></span>
<span><span class="co">#&gt; 7  2020-01-10 125.3 125.3 124.8 125.2   2548</span></span>
<span><span class="co">#&gt; 8  2020-01-13 125.2 125.3 125.1 125.2   2946</span></span>
<span><span class="co">#&gt; 9  2020-01-14 125.2 125.2 124.3 124.4   2796</span></span>
<span><span class="co">#&gt; 10 2020-01-15 124.4 124.5 123.7 123.9   2879</span></span>
<span><span class="fu"><a href="../reference/df_merge.html">df_merge</a></span><span class="op">(</span><span class="va">data1</span>, <span class="va">data2</span><span class="op">)</span></span>
<span><span class="co">#&gt;          time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 1  2020-01-02 123.0 123.1 122.5 122.7   1875</span></span>
<span><span class="co">#&gt; 2  2020-01-03 122.7 122.8 122.6 122.8   1479</span></span>
<span><span class="co">#&gt; 3  2020-01-06 122.8 123.4 122.4 123.3   1792</span></span>
<span><span class="co">#&gt; 4  2020-01-07 123.3 124.3 123.3 124.1   1977</span></span>
<span><span class="co">#&gt; 5  2020-01-08 124.1 124.8 124.0 124.8   2239</span></span>
<span><span class="co">#&gt; 6  2020-01-09 124.8 125.4 124.5 125.3   1842</span></span>
<span><span class="co">#&gt; 7  2020-01-10 125.3 125.3 124.8 125.2   2548</span></span>
<span><span class="co">#&gt; 8  2020-01-13 125.2 125.3 125.1 125.2   2946</span></span>
<span><span class="co">#&gt; 9  2020-01-14 125.2 125.2 124.3 124.4   2796</span></span>
<span><span class="co">#&gt; 10 2020-01-15 124.4 124.5 123.7 123.9   2879</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="df_append">df_append()<a class="anchor" aria-label="anchor" href="#df_append"></a>
</h4>
<p>Update a ‘data.frame’ object with new data. Can be used to append new
updated time series data to an existing dataframe, where each
observation is indexed by a unique timestamp/identifier in a key
column.</p>
<p>Takes 4 arguments:</p>
<ul>
<li>
<code>old</code> data.frame object containing existing data.</li>
<li>
<code>new</code> data.frame object containing new data.</li>
<li>
<code>key</code> [default ‘time’] column name used as key provided
as a character string.</li>
<li>
<code>keep.attr</code> [default ‘timestamp’] name of an attribute in
‘new’ to retain, if present, provided as a character string.</li>
</ul>
<p>Can be used to update price dataframes retrieved by
<code><a href="../reference/oanda.html">oanda()</a></code>. The function is designed to update existing data
with new values as they become available. As opposed to
<code><a href="../reference/df_merge.html">df_merge()</a></code>, the data in ‘new’ will overwrite the data in
‘old’ rather than create duplicates.</p>
<p>If the attribute specified by ‘keep.attr’ is present in ‘new’, for
example the ‘timestamp’ in pricing data returned by
<code><a href="../reference/oanda.html">oanda()</a></code>, this is retained. If the attribute is not found in
‘new’, the argument has no effect. All other custom attributes are
dropped.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="va">sample_ohlc_data</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">8</span>, <span class="op">]</span></span>
<span><span class="va">data1</span></span>
<span><span class="co">#&gt;         time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 1 2020-01-02 123.0 123.1 122.5 122.7   1875</span></span>
<span><span class="co">#&gt; 2 2020-01-03 122.7 122.8 122.6 122.8   1479</span></span>
<span><span class="co">#&gt; 3 2020-01-06 122.8 123.4 122.4 123.3   1792</span></span>
<span><span class="co">#&gt; 4 2020-01-07 123.3 124.3 123.3 124.1   1977</span></span>
<span><span class="co">#&gt; 5 2020-01-08 124.1 124.8 124.0 124.8   2239</span></span>
<span><span class="co">#&gt; 6 2020-01-09 124.8 125.4 124.5 125.3   1842</span></span>
<span><span class="co">#&gt; 7 2020-01-10 125.3 125.3 124.8 125.2   2548</span></span>
<span><span class="co">#&gt; 8 2020-01-13 125.2 125.3 125.1 125.2   2946</span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="va">sample_ohlc_data</span><span class="op">[</span><span class="fl">7</span><span class="op">:</span><span class="fl">10</span>, <span class="op">]</span></span>
<span><span class="va">data2</span></span>
<span><span class="co">#&gt;          time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 7  2020-01-10 125.3 125.3 124.8 125.2   2548</span></span>
<span><span class="co">#&gt; 8  2020-01-13 125.2 125.3 125.1 125.2   2946</span></span>
<span><span class="co">#&gt; 9  2020-01-14 125.2 125.2 124.3 124.4   2796</span></span>
<span><span class="co">#&gt; 10 2020-01-15 124.4 124.5 123.7 123.9   2879</span></span>
<span><span class="fu"><a href="../reference/df_append.html">df_append</a></span><span class="op">(</span><span class="va">data1</span>, <span class="va">data2</span><span class="op">)</span></span>
<span><span class="co">#&gt;          time  open  high   low close volume</span></span>
<span><span class="co">#&gt; 1  2020-01-02 123.0 123.1 122.5 122.7   1875</span></span>
<span><span class="co">#&gt; 2  2020-01-03 122.7 122.8 122.6 122.8   1479</span></span>
<span><span class="co">#&gt; 3  2020-01-06 122.8 123.4 122.4 123.3   1792</span></span>
<span><span class="co">#&gt; 4  2020-01-07 123.3 124.3 123.3 124.1   1977</span></span>
<span><span class="co">#&gt; 5  2020-01-08 124.1 124.8 124.0 124.8   2239</span></span>
<span><span class="co">#&gt; 6  2020-01-09 124.8 125.4 124.5 125.3   1842</span></span>
<span><span class="co">#&gt; 7  2020-01-10 125.3 125.3 124.8 125.2   2548</span></span>
<span><span class="co">#&gt; 8  2020-01-13 125.2 125.3 125.1 125.2   2946</span></span>
<span><span class="co">#&gt; 9  2020-01-14 125.2 125.2 124.3 124.4   2796</span></span>
<span><span class="co">#&gt; 10 2020-01-15 124.4 124.5 123.7 123.9   2879</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="timestamp-utilities">Timestamp Utilities<a class="anchor" aria-label="anchor" href="#timestamp-utilities"></a>
</h2>
<div class="section level4">
<h4 id="format_posixct">format_POSIXct()<a class="anchor" aria-label="anchor" href="#format_posixct"></a>
</h4>
<p>Formats a double POSIXct timestamp in the same way as the default
<code>fomat.POSIXct()</code>, without any additional customization
options. This provides a much faster implementation.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">time</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2025-04-27 18:28:56"</span></span>
<span><span class="fu"><a href="../reference/format_POSIXct.html">format_POSIXct</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "2025-04-27 18:28:56"</span></span></code></pre></div>
<hr>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Charlie Gao.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
